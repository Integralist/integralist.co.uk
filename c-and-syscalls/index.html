<!DOCTYPE HTML>
<!--
	Editorial by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
  <head>
    <title>Integralist</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
    <link rel="stylesheet" href="../assets/css/main.css" />
  </head>
  <body class="is-preload">
    <!-- Wrapper -->
    <div id="wrapper">
      <!-- Main -->
      <div id="main">
        <div class="inner">
          <!-- Header -->
					<header id="header">
						<a href="../index.html" class="logo"><strong>Home</strong></a>
							<ul class="icons">
							<!--<li><a href="https://x.com/integralist" class="icon brands fa-twitter" target="blank"><span class="label">Twitter</span></a></li>-->
							<!--<li><a href="https://instagram.com/wwfsuperstarsofwrestling" class="icon brands fa-instagram" target="blank"><span class="label">Instagram</span></a></li>-->
						</ul>
					</header>

          <!-- Content -->
          <section>
						<!--
            <header class="main">
              <h1>Royal Rumble 1989</h1>
              <p>A Bizarre Spectacle Where the Madness Multiplies</p>
            </header>
            <span class="image main"><img src="../images/rumble-89.jpg" alt="" /></span>
						-->
						<nav>

<ul>
<li><a href="#syscalls-and-c">Syscalls and C</a>
<ul>
<li><a href="#what-s-the-issue">What&rsquo;s the issue?</a></li>

<li><a href="#so-what-s-going-on">So what&rsquo;s going on?</a></li>

<li><a href="#wrapper-functions">Wrapper functions?</a></li>

<li><a href="#direct-system-call">Direct system call?</a></li>
</ul></li>
</ul>

</nav>

<h1 id="syscalls-and-c">Syscalls and C</h1>

<p>This post is aimed at explaining the difference between a system call (provided by the Linux kernal) and a wrapper function that has a similar name within one of the C standard libraries.</p>

<p>I have no formal Computer Science (CS) background, I started programming in 1999 and only from 2016 am I starting to learn the C programming language in order to help give me a deeper knowledge of how *nix systems work and other core CS concepts.</p>

<blockquote>
<p>See my previous post called &lsquo;<a href="/posts/bits-and-bytes/">Bits and Bytes)</a>&rsquo; to see where these learnings are taking me.</p>
</blockquote>

<h2 id="what-s-the-issue">What&rsquo;s the issue?</h2>

<p>It can be confusing sometimes knowing where to look for documentation when dealing with C †</p>

<blockquote>
<p>† that is if you&rsquo;re not a systems engineer, and have no CS degree, nor learnt C</p>
</blockquote>

<p>As an example, you might learn about the <code>strace</code> command and start investigating what your Ruby application is up to. In doing so you&rsquo;ll see lots of calls to different functions and you might decide you want to look up the documentation for those functions.</p>

<p>This could be where your first problem arises. You might think &ldquo;Ruby is written in C, so I&rsquo;ll look at the C documentation&rdquo; and then come up with nothing.</p>

<h2 id="so-what-s-going-on">So what&rsquo;s going on?</h2>

<p>The key is to remember that the Linux operating system (which your code is very likely running on) is itself written in C. But Linux provides its own set of functions written in C that aren&rsquo;t part of the C language.</p>

<p>So you might see a function used and wonder why it&rsquo;s not showing up within the C language documentation. That&rsquo;s because it&rsquo;s not part of the C language. The Linux engineers would&rsquo;ve created the function within Linux so you need to look at the Linux documentation to find out what it does.</p>

<blockquote>
<p>e.g <a href="https://linux.die.net/man/" target="_blank">https://linux.die.net/man/</a></p>
</blockquote>

<p>Some of these Linux provided functions are known as &lsquo;system calls&rsquo;. If you visit <a href="https://linux.die.net/man/" target="_blank">the above link</a> you&rsquo;ll see there in &lsquo;section 2&rsquo; a list of all system calls.</p>

<p>An alternative (searchable) list of syscalls can be found here: <a href="https://filippo.io/linux-syscall-table/" target="_blank">https://filippo.io/linux-syscall-table/</a></p>

<h2 id="wrapper-functions">Wrapper functions?</h2>

<p>Now what makes this a little more confusing is that the system calls aren&rsquo;t usually directly accessible. So &lsquo;section 2&rsquo; of the Linux documentation may list all the &lsquo;system call&rsquo; documentation, but &lsquo;section 3&rsquo; lists all library functions including what are referred to as &lsquo;thin wrapper&rsquo; functions for the system calls.</p>

<p>For example, Linux uses a separate library that provides a <code>fork</code> function which is a wrapper around the actual system call <code>fork</code> equivalent provided by Linux itself. The wrapper function is then also something other applications written in C can utilise.</p>

<p>This is noted here <a href="https://linux.die.net/man/2/intro" target="_blank">https://linux.die.net/man/2/intro</a> in the documentation:</p>

<blockquote>
<p>A system call is an entry point into the Linux kernel. Usually, system calls are not invoked directly: instead, most system calls have corresponding C library wrapper functions which perform the steps required in order to invoke the system call. Thus, making a system call look the same as invoking a normal library function.</p>
</blockquote>

<p>So what do these thin wrapper functions do? Well the docs tell us&hellip;</p>

<blockquote>
<p>Often the glibc wrapper function is quite thin, doing little work other than copying arguments to the right registers before invoking the system call, and then setting errno appropriately after the system call has returned. Note: system calls indicate a failure by returning a negative error number to the caller; when this happens, the wrapper function negates the returned error number (to make it positive), copies it to errno, and returns -1 to the caller of the wrapper. Sometimes, however, the wrapper function does some extra work <em>before</em> invoking the system call. For example, nowadays there are two related system calls, <code>truncate</code> and <code>truncate64</code>, and the glibc <code>truncate()</code> wrapper function checks which of those system calls are provided by the kernel and determines which should be employed.</p>
</blockquote>

<p>Using <code>fork</code> as an example:</p>

<ul>
<li>Here is the system call docs: <a href="https://linux.die.net/man/2/fork" target="_blank">https://linux.die.net/man/2/fork</a></li>
<li>Here is the wrapper docs: <a href="https://linux.die.net/man/3/fork" target="_blank">https://linux.die.net/man/3/fork</a></li>
</ul>

<p>But where do some of the wrapper equivalents come from? Well, one such provider is glibc; which is <a href="https://en.wikipedia.org/wiki/GNU_C_Library" target="_blank">GNU&rsquo;s standard C library</a>. Which states:</p>

<blockquote>
<p>The C language provides no built-in facilities for performing such common operations as input/output, memory management, string manipulation, and the like. Instead, these facilities are defined in a standard library, which you compile and link with your programs. The GNU C Library, described in this document, defines all of the library functions that are specified by the ISO C standard, as well as additional features specific to POSIX and other derivatives of the Unix operating system, and extensions specific to GNU systems.</p>
</blockquote>

<p><a href="https://en.wikipedia.org/wiki/C_standard_library" target="_blank">Here&rsquo;s a link also to the standard C library</a> libc if you&rsquo;re interested.</p>

<h2 id="direct-system-call">Direct system call?</h2>

<p>What if one of the additional C libraries (libc, glibc etc) don&rsquo;t provide a wrapper?</p>

<p>Well in these situations you can make a direct system call!</p>

<p>See <a href="https://linux.die.net/man/2/syscall" target="_blank">https://linux.die.net/man/2/syscall</a> which states:</p>

<blockquote>
<p><code>syscall()</code> is a small library function that invokes the system call whose assembly language interface has the specified number with the specified arguments. Employing <code>syscall()</code> is useful, for example, when invoking a system call that has no wrapper function in the C library.</p>
</blockquote>

          </section>
        </div>
      </div>
      <!-- Sidebar -->
<div id="sidebar">
  <div class="inner">
    <!-- Search -->
    <!--<section id="search" class="alt">-->
    <!--  <form method="post" action="#">-->
    <!--    <input type="text" name="query" id="query" placeholder="Search" />-->
    <!--  </form>-->
    <!--</section>-->
    <!-- Menu -->
    <nav id="menu">
      <header class="major">
        <h2>Menu</h2>
      </header>
      <ul>
        <li><a href="../index.html">About</a></li>
        <!--<li><a href="../resume/index.html">Resume</a></li>-->
				
      </ul>
    </nav>
    <!-- Section -->
		<!--
    <section>
      <header class="major">
        <h2>Highlights</h2>
      </header>
      <div class="mini-posts">
        <article>
          <a href="ppv-survivorseries-88.html" class="image"><img src="../images/survivor-88-index.jpg" alt="" /></a>
          <p>Get ready for the ultimate showdown as Survivor Series 1988 brings non-stop tag team action, fierce rivalries, and unforgettable battles between the biggest WWF superstars!</p>
        </article>
        <article>
          <a href="ppv-royalrumble-89.html" class="image"><img src="../images/rumble-89-index.jpg" alt="" /></a>
          <p>Royal Rumble 1989 unleashes chaos with 30 superstars battling for glory in an unforgettable over-the-top-rope showdown!</p>
        </article>
        <article>
          <a href="ppv-summerslam-88.html" class="image"><img src="../images/slam-88-index.jpg" alt="" /></a>
          <p>SummerSlam 1988 delivers explosive action with iconic matchups, as the WWF's biggest stars collide in the hottest event of the summer!</p>
        </article>
      </div>
    </section>
		-->
    <!-- Section -->
    <!--<section>-->
    <!--  <header class="major">-->
    <!--    <h2>Get in touch</h2>-->
    <!--  </header>-->
    <!--  <p>Sed varius enim lorem ullamcorper dolore aliquam aenean ornare velit lacus, ac varius enim lorem ullamcorper dolore. Proin sed aliquam facilisis ante interdum. Sed nulla amet lorem feugiat tempus aliquam.</p>-->
    <!--  <ul class="contact">-->
    <!--    <li class="icon solid fa-envelope"><a href="#">information@untitled.tld</a></li>-->
    <!--    <li class="icon solid fa-phone">(000) 000-0000</li>-->
    <!--    <li class="icon solid fa-home">1234 Somewhere Road #8254<br />-->
    <!--      Nashville, TN 00000-0000</li>-->
    <!--  </ul>-->
    <!--</section>-->
    <!-- Footer -->
    <footer id="footer">
      <p class="copyright">&copy; Integralist. All rights reserved.</p>
      <p class="copyright small">Demo Images: <a href="https://unsplash.com">Unsplash</a>. Design: <a href="https://html5up.net">HTML5 UP</a>.</p>
    </footer>
  </div>
</div>

    </div>
    <!-- Scripts -->
    <script src="../assets/js/jquery.min.js"></script>
    <script src="../assets/js/browser.min.js"></script>
    <script src="../assets/js/breakpoints.min.js"></script>
    <script src="../assets/js/util.js"></script>
    <script src="../assets/js/main.js"></script>
  </body>
</html>
